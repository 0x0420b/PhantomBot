(function(){var e=[];function o(o,n,s){if(!n||isNaN(n)){n=$.systemTime()+($.inidb.exists("commandCooldown",o)?parseInt($.inidb.get("commandCooldown",o))*1e3:0)}if(!s){s="global"}if(n>0){e.push({command:o,username:s,expiresAt:n})}}function n(n,s){var a,i;for(a in e){if(!e[a].command.equalsIgnoreCase(n)){continue}if(e[a].username.equalsIgnoreCase("global")||e[a].username.equalsIgnoreCase(s)){i=e[a].expiresAt-$.systemTime();if(i<=0){e.splice(a,1);o(n,null,s?s:null)}return i}}o(n,null,s?s:null);return 0}function s(o){var n;for(n in e){if(e[n].command.equalsIgnoreCase(o)){e.splice(n,1);return}}}function a(e){return $.inidb.exists("commandCooldown",e)}$.bind("command",function(e){var o=e.getSender().toLowerCase(),n=e.getCommand(),a=e.getArgs(),i=a[0],r=parseInt(a[1]);if(n.equalsIgnoreCase("cooldown")){if(!i||isNaN(r)){$.say($.whisperPrefix(o)+$.lang.get("cooldown.set.usage"));return}if(r==0){$.inidb.del("commandCooldown",i.toLowerCase())}else{$.inidb.set("commandCooldown",i.toLowerCase(),r)}$.say($.whisperPrefix(o)+$.lang.get("cooldown.set.success",i,$.getTimeString(r)))}if(n.equalsIgnoreCase("clearcooldown")){if(!i){$.say($.whisperPrefix(o)+$.lang.get("cooldown.clear.usage"));return}s(i);$.say($.whisperPrefix(o)+$.lang.get("cooldown.clear.success",i))}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./core/commandCoolDown.js")){$.registerChatCommand("./core/commandCoolDown.js","cooldown",1);$.registerChatCommand("./core/commandCoolDown.js","clearcooldown",1)}});$.coolDown={set:o,get:n,unPause:s,hasCooldown:a}})();