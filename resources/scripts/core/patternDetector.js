(function(){var e={link:new RegExp("((?:(http|https|Http|Https|rtsp|Rtsp):\\/\\/(?:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)"+"\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,64}(?:\\:(?:[a-zA-Z0-9\\$\\-\\_"+"\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,25})?\\@)?)?"+"((?:(?:[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}\\.)+"+"(?:"+"(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])"+"|(?:biz|b[abdefghijmnorstvwyz])"+"|(?:cat|com|coop|c[acdfghiklmnoruvxyz])"+"|d[ejkmoz]"+"|(?:edu|e[cegrstu])"+"|f[ijkmor]"+"|(?:gov|g[abdefghilmnpqrstuwy])"+"|h[kmnrtu]"+"|(?:info|int|i[delmnoqrst])"+"|(?:jobs|j[emop])"+"|k[eghimnrwyz]"+"|l[abcikrstuvy]"+"|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])"+"|(?:name|net|n[acefgilopruz])"+"|(?:org|om)"+"|(?:pro|p[aefghklmnrstwy])"+"|qa"+"|r[eouw]"+"|s[abcdeghijklmnortuvyz]"+"|(?:tel|travel|t[cdfghjklmnoprtvwz])"+"|u[agkmsyz]"+"|v[aceginu]"+"|w[fs]"+"|y[etu]"+"|z[amw]))"+"|(?:(?:25[0-5]|2[0-4]"+"[0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\\.(?:25[0-5]|2[0-4][0-9]"+"|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(?:25[0-5]|2[0-4][0-9]|[0-1]"+"[0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}"+"|[1-9][0-9]|[0-9])))"+"(?:\\:\\d{1,5})?)"+"(\\/(?:(?:[a-zA-Z0-9\\;\\/\\?\\:\\@\\&\\=\\#\\~"+"\\-\\.\\+\\!\\*\\'\\(\\)\\,\\_])|(?:\\%[a-fA-F0-9]{2}))*)?"+"(?:\\b|$)","ig"),email:new RegExp("[a-zA-Z0-9\\+\\.\\_\\%\\-]{1,256}\\@[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}(\\.[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25})+","ig"),other:new RegExp("(magnet:|mailto:|ed2k://|irc://|ircs://|skype:|ymsgr:|xfire:|steam:|aim:|spotify:)","ig"),jUnicodeGrapheme:"(?>\\P{M}\\p{M}+)+",jNonLetter:"(\\p{InPhonetic_Extensions}|\\p{InLetterlikeSymbols}|\\p{InDingbats}|\\p{InBoxDrawing}|\\p{InBlockElements}|\\p{InGeometricShapes}|\\p{InHalfwidth_and_Fullwidth_Forms}|[!-/:-@\\[-`{-~])",jNonLetterSeq:"(\\p{InPhonetic_Extensions}|\\p{InLetterlikeSymbols}|\\p{InDingbats}|\\p{InBoxDrawing}|\\p{InBlockElements}|\\p{InGeometricShapes}|\\p{InHalfwidth_and_Fullwidth_Forms}|[!-/:-@\\[-`{-~])*"},t="";function r(r,n){var l=r.getMessage(),o;if(!l){return false}else{l=a(l,n)}o=e.email.exec(l);if(o&&o[0]!=""){t=o[0];$.consoleLn(">> Matched link on email pattern from "+r.getSender().toLowerCase()+": "+t);$.log("patternDetector","Matched link on email pattern: "+t);return true}o=e.link.exec(l);if(o&&o[0]!=""){t=o[0];$.consoleLn(">> Matched link on link pattern from "+r.getSender().toLowerCase()+": "+t);$.log("patternDetector","Matched link on link pattern: "+t);return true}o=e.other.exec(l);if(o&&o[0]!=""){t=o[0];$.consoleLn(">> Matched link on other pattern from "+r.getSender().toLowerCase()+": "+t);$.log("patternDetector","Matched link on other pattern: "+t);return true}return false}function n(){return t}function a(e,t){var r,n,a;e=e+"";for(r=0;r<$.strlen(e);r++){if(e.charCodeAt(r)<32||e.charCodeAt(r)>126){n="";a="";if(r>0){n=e.substring(0,r)}if(r<$.strlen(e)){a=e.substring(r+1)}e=n+" "+a}}e.replace(/"/g,"").replace(/--/g,".").replace(/\[dot]/g,".").replace(/<dot>/g,".").replace(/\{dot}/g,".").replace(/\(dot\)/g,".");if(t){e.replace(/\sdot\s/g,".").replace(/,/g,".").replace(/\|-\|/g,"h").replace(/\|_\|/g,"u").replace(/\\\//g,"v").replace(/0/g,"o").replace(/1/g,"i").replace(/3/g,"e").replace(/5/g,"s").replace(/7/g,"t").replace(/8/g,"b").replace(/\|\)/g,"d").replace(/\|\)/g,"d").replace(/\(\)/g,"o").replace(/\(/g,"c").replace(/\$/g,"s").replace(/\/-\\/g,"a").replace(/@/g,"a").replace(/\|\\\/\|/g,"m").replace(/\|\/\|/g,"n").replace(/\|\\\|/g,"n").replace(/\s\./g,".").replace(/\.\s/g,".").replace(/\.\./g,".")}return e}function l(e){var t=e.getMessage()+"",r=0,n=/(.+?)\\1+/,a,l;while(t.match(n)){a=t.replace(n,"$1");l=t.replace(n,"$2");if($.strlen(a)>0&&$.strlen(l)>0){if($.strlen(a)>$.strlen(l)){if($.strlen(a)/$.strlen(l)>1){r=Math.max(r,$.strlen(a)/$.strlen(l))}}else{if($.strlen(l)/$.strlen(a)>1){r=Math.max(r,$.strlen(l)/$.strlen(a))}}}}return r}function o(e){var t=e.getMessage()+"",r=0,n=/(.+?)\\1+/,a,l;while(t.match(n)){a=t.replace(n,"$1");l=t.replace(n,"$2");if($.strlen(a)>0&&$.strlen(l)>0){if($.strlen(a)>$.strlen(l)){if($.strlen(a)/$.strlen(l)>1){r=r+$.strlen(a)/$.strlen(l)}}else{if($.strlen(l)/$.strlen(a)>1){r=r+$.strlen(l)/$.strlen(a)}}}}return r}function s(t){var r=t.getMessage(),n=java.util.regex.Pattern.compile(e.jUnicodeGrapheme).matcher(r),a,l=0;while(n.find()==true){a=n.group(0);l=Math.max(l,$.strlen(a))}return l}function i(t){var r=t.getMessage(),n=java.util.regex.Pattern.compile(e.jNonLetter).matcher(r),a,l=0;while(n.find()==true){a=n.group(0);if($.strlen(a)>0){l++}}return l}function c(t){var r=t.getMessage(),n=java.util.regex.Pattern.compile(e.jNonLetterSeq).matcher(r),a,l=0;while(n.find()==true){a=n.group(0);while(n.find()==true){a=n.group(0);l=Math.max(l,$.strlen(a))}}return l}$.patternDetector={hasLinks:r,getLongestNonLetterSequence:c,getLongestRepeatedSequence:l,getLongestGraphemeCluster:s,getNumberOfNonLetters:i,getNumberOfRepeatSequences:o,getLastFoundLink:n}})();