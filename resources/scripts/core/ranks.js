(function(){function e(e){return $.inidb.exists("viewerRanks",e.toLowerCase())}function n(n){if(e(n)){return $.inidb.get("viewerRanks",n.toLowerCase())}else{return""}}function r(n){if(e(n)){$.inidb.del("viewerRanks",n.toLowerCase());$.say($.username.resolve(n)+" has been demoted from their rank.")}}function i(e,n){$.inidb.set("viewerRanks",e.toLowerCase(),n);$.say($.username.resolve(e)+' has been promoted to "'+n+'"!')}function s(){return $.inidb.exists("settings","rankEligableTime")?$.inidb.exists("settings","rankEligableTime"):50}function a(e){return(n(e)+" "+$.username.resolve(e)).trim()}$.bind("command",function(a){var t=a.getSender().toLowerCase();var o=$.username.resolve(t);var u=a.getCommand();var d=a.getArgs();var f=d[0];if(u.equalsIgnoreCase("rank")){if(f&&$.isMod(t)){var l=d[1].toLowerCase();if(f=="set"&&l){var m=d.splice(2).join(" ");if(m){i(l,m)}}if(f=="del"&&l){r(l)}if(f=="settime"&&l&&!isNaN(parseInt(l))){$.inidb.set("settings","rankEligableTime",l);$.say($.whisperPrefix(t)+"Set minimal time required for a rank to "+l+" hours.")}}else{if(e(t)){$.say(o+', your rank is currently "'+n(t)+'".')}else{$.say(o+", you currently do not have a rank. You can get one if you've been in this chat for "+s()+" hours or more.")}}}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./core/ranks.js")){$.registerChatCommand("./core/ranks.js","rank",7)}});$.resolveRank=a;$.getRank=n;$.hasRank=e})();