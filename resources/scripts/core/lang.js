(function(){var e=[],n=$.inidb.exists("settings","lang")?$.inidb.get("settings","lang"):"english";function s(){$.bot.loadScriptRecursive("./lang/english",true);if(n!="english"){$.bot.loadScriptRecursive("./lang/"+n,true)}}function i(n,s){if(n&&s){e[n]=s}}function a(n){var s=e[n.toLowerCase()],i;if(!s){$.logError("./core/lang.js",21,'Language string missing for "'+n+'"');$.consoleLn('[lang.js] Missing string "'+n+'"');return'Could not find string for "'+n+'"'}for(i=1;i<arguments.length;i++){while(s.indexOf("$"+i)>=0){s=s.replace("$"+i,arguments[i])}}return s}function t(n){return e[n]}$.bind("command",function(e){var i=e.getSender().toLowerCase(),t=e.getCommand(),r=e.getArgs(),g=r[0],o;if(t.equalsIgnoreCase("lang")){if(!$.isAdmin(i)){$.say($.whisperPrefix(i)+$.adminMsg);return}if(!g){$.say($.whisperPrefix(i)+a("lang.curlang",n))}else{g=g.toLowerCase();if(!$.fileExists("./scripts/lang/"+g+"/main.js")){$.say($.whisperPrefix(i)+a("lang.lang.404"))}else{$.inidb.set("settings","lang",g);n=g;s();$.say($.whisperPrefix(i)+a("lang.lang.changed",g))}}}if(t.equalsIgnoreCase("mute")){o=!$.getIniDbBoolean("settings","response_@chat");$.setIniDbBoolean("settings","response_@chat",o);$.say($.whisperPrefix(i)+(o?a("lang.response.enabled"):a("lang.response.disabled")))}if(t.equalsIgnoreCase("toggleme")){o=!$.getIniDbBoolean("settings","response_action");$.setIniDbBoolean("settings","response_action",o);$.say($.whisperPrefix(i)+(o?a("lang.response.action.enabled"):a("lang.response.action.disabled")))}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./core/lang.js")){$.registerChatCommand("./core/lang.js","lang",1);$.registerChatCommand("./core/lang.js","mute",1);$.registerChatCommand("./core/lang.js","toggleme",1)}});$.lang={exists:t,get:a,register:i};s()})();