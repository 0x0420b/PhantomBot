(function(){var e=$.inidb.exists("settings","hostReward")?$.inidb.get("settings","hostReward"):200,s=216e5,t=[],n=[],r=false;$.bind("twitchHostsInitialized",function(){$.consoleLn(">> Enabling new hoster announcements");r=true});$.bind("twitchHosted",function(a){var i=a.getHoster(),o=$.username.resolve(i),h=$.systemTime();if(!r){return}$.writeToFile(i,"./addons/hostHandler/latestHost.txt",false);if(t[i]>h||n[i]>h){return}t[i]=h+s;if(e>0){$.inidb.incr("points",i,e);$.say($.lang.get("hosthandler.newhost.reward",o,e))}else{$.say($.lang.get("hosthandler.newhost",o))}});$.bind("twitchUnhosted",function(e){var s=e.getHoster(),r;for(r in t){if(s.equalsIgnoreCase(r)){n[r]=t[r];t.splice(r,1);return}}});$.bind("command",function(e){var s=e.getSender().toLowerCase(),n=e.getCommand(),r=e.getArgs(),a=parseInt(r[0]),i=[],o;if(n.equalsIgnoreCase("hostreward")){if(!$.isAdmin(s)){$.say($.whisperPrefix(s)+$.adminMsg);return}if(isNaN(a)){$.say($.whisperPrefix(s)+$.lang.get("hosthandler.set.hostreward.usage",$.pointNameMultiple));return}$.inidb.set("settings","hostReward",a);$.say($.whisperPrefix(s)+$.lang.get("hosthandler.set.hostreward.success",$.getPointsString(a)))}if(n.equalsIgnoreCase("unhost")){if(!$.isAdmin(s)){$.say($.whisperPrefix(s)+$.adminMsg);return}$.say(".unhost")}if(n.equalsIgnoreCase("hostcount")){$.say($.lang.get("hosthandler.newhost",t.length))}if(n.equalsIgnoreCase("hostlist")){for(o in t){i.push(o)}$.say($.lang.get("hosthandler.hostlist",i.join(", ")))}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./handlers/hostHandler.js")){$.registerChatCommand("./handlers/hostHandler.js","hostreward",1);$.registerChatCommand("./handlers/hostHandler.js","unhost",1);$.registerChatCommand("./handlers/hostHandler.js","hostcount");$.registerChatCommand("./handlers/hostHandler.js","hostlist")}})})();